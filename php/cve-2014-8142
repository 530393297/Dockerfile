FROM ubuntu

MAINTAINER Chu <root@sh3ll.me>

RUN apt-get update && apt-get -y install curl bzip2 gcc make vim gdb python3-minimal git \
	&& curl http://cn.php.net/distributions/php-5.5.10.tar.bz2 -o /tmp/php-5.5.10.tar.bz2 \
	&& tar xjvf /tmp/php-5.5.10.tar.bz2 -C / && cd /php-5.5.10 \
	&& ./configure --prefix=/php --disable-libxml --disable-dom --disable-simplexml --disable-xml --disable-xmlreader --disable-xmlwriter --without-pear \
	&& make -j && make install \
	&& cd /root/ && git clone https://github.com/longld/peda .peda \
	&& echo "source ~/.peda/peda.py" >> ~/.gdbinit \
	&& echo "alias gdb='gdb -q'" >> .bashrc && echo export PATH=/php/bin:'$PATH' >> .bashrc \
	&& apt-get clean && apt-get autoclean && apt-get -y --purge autoremove \
	&& rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
